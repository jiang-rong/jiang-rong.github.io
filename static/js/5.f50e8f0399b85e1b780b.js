webpackJsonp([5],{"7ytt":function(t,e){},Kgcx:function(t,e){},MzYP:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("6XoH"),n("T1vS"),n("hLQq");var i=n("e9HZ"),c=n("xd7I"),s=n("N+Bw"),o=n("+63U"),a=n("j6cy"),r=n.n(a),l=n("6g9A");function u(t){var e,n,i,c,s;e=t.parent&&t.parent.$router,n=t.props,i=n.to,c=n.url,s=n.replace,i&&e?e[s?"replace":"push"](i):c&&(s?location.replace(c):location.href=c)}var d={url:String,replace:Boolean,to:[String,Object]},f=n("raf7"),h=Object(s.g)("button"),p=h[0],v=h[1];function m(t,e,n,i){var c=e.tag,s=e.type,o=e.disabled,a=e.loading,d=e.hairline,h=e.loadingText,p=[v([s,e.size,{loading:a,disabled:o,hairline:d,block:e.block,plain:e.plain,round:e.round,square:e.square,"bottom-action":e.bottomAction}]),{"van-hairline--surround":d}];return t(c,r()([{class:p,attrs:{type:e.nativeType,disabled:o},on:{click:function(t){a||o||(Object(l.a)(i,"click",t),u(i))},touchstart:function(t){Object(l.a)(i,"touchstart",t)}}},Object(l.b)(i)]),[a?[t(f.a,{attrs:{size:e.loadingSize,color:"default"===s?void 0:""}}),h&&t("span",{class:v("loading-text")},[h])]:t("span",{class:v("text")},[n.default?n.default():e.text])])}m.props=Object(i.a)({},d,{text:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,nativeType:String,loadingText:String,bottomAction:Boolean,tag:{type:String,default:"button"},type:{type:String,default:"default"},size:{type:String,default:"normal"},loadingSize:{type:String,default:"20px"}});var g,b=p(m),k=Object(s.g)("dialog"),y=k[0],C=k[1],_=k[2],B=y({mixins:[o.a],props:{title:String,message:String,className:null,callback:Function,beforeClose:Function,messageAlign:String,cancelButtonText:String,cancelButtonColor:String,confirmButtonText:String,confirmButtonColor:String,showCancelButton:Boolean,showConfirmButton:{type:Boolean,default:!0},overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!1}},data:function(){return{loading:{confirm:!1,cancel:!1}}},methods:{onClickOverlay:function(){this.handleAction("overlay")},handleAction:function(t){var e=this;this.$emit(t),this.beforeClose?(this.loading[t]=!0,this.beforeClose(t,function(n){!1!==n&&e.onClose(t),e.loading[t]=!1})):this.onClose(t)},onClose:function(t){this.close(),this.callback&&this.callback(t)}},render:function(t){var e,n=this;if(this.shouldRender){var i=this.title,c=this.message,s=this.messageAlign,o=this.slots(),a=i&&t("div",{class:C("header",{isolated:!c&&!o})},[i]),r=(o||c)&&t("div",{class:C("content")},[o||t("div",{domProps:{innerHTML:c},class:C("message",(e={"has-title":i},e[s]=s,e))})]),l=this.showCancelButton&&this.showConfirmButton,u=t("div",{class:["van-hairline--top",C("footer",{buttons:l})]},[this.showCancelButton&&t(b,{attrs:{size:"large",loading:this.loading.cancel,text:this.cancelButtonText||_("cancel")},class:C("cancel"),style:{color:this.cancelButtonColor},on:{click:function(){n.handleAction("cancel")}}}),this.showConfirmButton&&t(b,{attrs:{size:"large",loading:this.loading.confirm,text:this.confirmButtonText||_("confirm")},class:[C("confirm"),{"van-hairline--left":l}],style:{color:this.confirmButtonColor},on:{click:function(){n.handleAction("confirm")}}})]);return t("transition",{attrs:{name:"van-dialog-bounce"}},[t("div",{directives:[{name:"show",value:this.value}],class:[C(),this.className]},[a,r,u])])}}});function L(t){return s.f?Promise.resolve():new Promise(function(e,n){g&&Object(s.d)(g.$el)||(g&&g.$destroy(),(g=new(c.a.extend(B))({el:document.createElement("div"),propsData:{lazyRender:!1}})).$on("input",function(t){g.value=t})),Object(i.a)(g,L.currentOptions,t,{resolve:e,reject:n})})}L.defaultOptions={value:!0,title:"",message:"",overlay:!0,className:"",lockScroll:!0,beforeClose:null,messageAlign:"",getContainer:"body",cancelButtonText:"",cancelButtonColor:null,confirmButtonText:"",confirmButtonColor:null,showConfirmButton:!0,showCancelButton:!1,closeOnClickOverlay:!1,callback:function(t){g["confirm"===t?"resolve":"reject"](t)}},L.alert=L,L.confirm=function(t){return L(Object(i.a)({showCancelButton:!0},t))},L.close=function(){g&&(g.value=!1)},L.setDefaultOptions=function(t){Object(i.a)(L.currentOptions,t)},L.resetDefaultOptions=function(){L.currentOptions=Object(i.a)({},L.defaultOptions)},L.resetDefaultOptions(),L.install=function(){c.a.use(B)},c.a.prototype.$dialog=L;var O=L,x=n("4YfN"),j=n.n(x),S=n("CPkp"),w=n("R4Sj"),A=(n("6iV/"),n("M67l")),$={data:function(){return{checkList:[],status:!0}},filters:{aprice:function(t){return"￥"+t}},components:{myfooter:S.a},computed:j()({},Object(w.d)(["cartList","orderList"]),Object(w.b)(["cartNum"]),{isEmpty:function(){return 0==this.cartNum},isNoChoose:function(){return 0==this.checkList.length},totalPrice:function(){var t=this,e=0;return this.cartList.filter(function(e){return t.checkList.indexOf(e.cid)>-1}).forEach(function(t){e+=Number(t.price)*Number(t.num)},0),e}}),methods:{desBtn:function(t){var e=this.cartList[t].num;e<=1||(e--,this.$store.commit("updateGoods",{index:t,key:"num",value:e}))},addBtn:function(t){var e=this.cartList[t].num;e++,this.$store.commit("updateGoods",{index:t,key:"num",value:e})},reg:function(t,e){var n=this.cartList[e].num;n=""==n?1:n,this.$store.commit("updateGoods",{index:e,key:"num",value:n})},findPosition:function(t){return this.goodsList.findIndex(function(e){return e.id==t})},del:function(t){this.findPosition(t)},itemDelete:function(t){var e=this;O.confirm({title:"删除商品",message:"确认将该商品从购物车移除"}).then(function(){var n=e.cartList[t].cid;e.checkList=e.checkList.filter(function(t){return t!=n}),e.$store.commit("deleteGoods",t),Object(A.a)("删除成功")}).catch(function(t){})},delSelect:function(){var t=this;O.confirm({title:"删除商品",message:"是否将选中的商品从购物车移除"}).then(function(){t.checkList.map(function(e){t.cartList.forEach(function(n,i){n.cid==e&&t.$store.commit("deleteGoods",i)})}),t.checkList=[],Object(A.a)("删除成功")}).catch(function(t){})},check_All:function(){this.checkList.length==this.cartList.length?this.checkList=[]:this.checkList=this.cartList.map(function(t){return t.cid})},pay:function(){var t=this;if(this.isNoChoose)Object(A.a)("当前没有选择任何商品");else{var e=this.cartList.filter(function(e){if(t.checkList.includes(e.cid))return e});this.$store.commit("addOrder",e),this.$router.push({path:"/Order",query:{from:"/Cart"}})}}},mounted:function(){var t=this;this.bus.$on("clearCheck",function(){t.checkList=[]})}},N={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"content-wrap"},[n("div",{staticClass:"cart-tool"},[n("div",{staticClass:"center-wrap"},[n("span",[t._v("共"+t._s(this.cartNum)+"件商品")]),t._v(" "),t.isEmpty?t._e():n("span",{on:{click:function(e){t.status=!t.status}}},[t._v(t._s(this.status?"管理":"完成"))])])]),t._v(" "),t.isEmpty?n("div",{staticClass:"noDataTips"},[t._v("购物车是空的")]):n("ul",{staticClass:"cart-list"},[n("div",{staticClass:"center-wrap"},t._l(t.cartList,function(e,i){return n("li",[n("span",{staticClass:"check-box-wrap"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.checkList,expression:"checkList"}],attrs:{type:"checkbox",id:"g_"+i},domProps:{value:e.cid,checked:Array.isArray(t.checkList)?t._i(t.checkList,e.cid)>-1:t.checkList},on:{change:function(n){var i=t.checkList,c=n.target,s=!!c.checked;if(Array.isArray(i)){var o=e.cid,a=t._i(i,o);c.checked?a<0&&(t.checkList=i.concat([o])):a>-1&&(t.checkList=i.slice(0,a).concat(i.slice(a+1)))}else t.checkList=s}}}),t._v(" "),n("label",{staticClass:"ui-checkbox",attrs:{for:"g_"+i}})]),t._v(" "),n("router-link",{staticClass:"img-wrap",attrs:{to:e.url,tag:"div"}},[n("img",{attrs:{src:e.spic}})]),t._v(" "),n("div",[n("router-link",{staticClass:"ellipsis2",attrs:{tag:"p",to:e.url}},[t._v(t._s(e.goodName))]),t._v(" "),n("p",{staticClass:"justify"},[n("span",{staticClass:"type"},[t._v(t._s(e.type))])]),t._v(" "),n("p",{staticClass:"info-footer"},[n("span",{staticClass:"theme-color"},[t._v(t._s(t._f("aprice")(e.price)))]),t._v(" "),n("span",[n("span",{staticClass:"reduce-btn",on:{click:function(e){return t.desBtn(i)}}},[t._v("-")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.num,expression:"item.num",modifiers:{number:!0}}],staticClass:"input-area",attrs:{type:"number",oninput:"this.value=this.value.replace(/(^0|[^\\d])/g,'')"},domProps:{value:e.num},on:{change:function(e){return t.reg(e,i)},input:function(n){n.target.composing||t.$set(e,"num",t._n(n.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),n("span",{staticClass:"increase-btn",on:{click:function(e){return t.addBtn(i)}}},[t._v("+")])])])],1)],1)}),0)])]),t._v(" "),t.isEmpty?t._e():n("div",{staticClass:"cart-footer-nav"},[n("div",[n("input",{attrs:{type:"checkbox",id:"all"},domProps:{checked:t.cartList.length==t.checkList.length&&t.cartList.length},on:{click:t.check_All}}),t._v(" "),n("label",{staticClass:"ui-checkbox",attrs:{for:"all"}}),t._v("\n\t\t全选\n\t\t")]),t._v(" "),n("div",[t.status?[t._v("\n\t\t合计\n\t\t"),n("span",{staticClass:"theme-color"},[t._v(t._s(t._f("aprice")(t.totalPrice)))]),t._v(" "),n("span",{on:{click:t.pay}},[t._v("去结算")])]:n("span",{on:{click:t.delSelect}},[t._v("删除所选")])],2)]),t._v(" "),n("myfooter")],1)},staticRenderFns:[]};var P=n("C7Lr")($,N,!1,function(t){n("7ytt"),n("Kgcx")},"data-v-ff440fa6",null);e.default=P.exports},hLQq:function(t,e){},raf7:function(t,e,n){"use strict";var i=n("j6cy"),c=n.n(i),s=n("N+Bw"),o=n("6g9A"),a=Object(s.g)("loading"),r=a[0],l=a[1],u="#c9c9c9";function d(t,e,n,i){var s=e.color,a=e.size,r=e.type,d="white"===s||"black"===s?s:"",f={color:"black"===s?u:s,width:a,height:a},h=[];if("spinner"===r)for(var p=0;p<12;p++)h.push(t("i"));var v="circular"===r&&t("svg",{class:l("circular"),attrs:{viewBox:"25 25 50 50"}},[t("circle",{attrs:{cx:"50",cy:"50",r:"20",fill:"none"}})]);return t("div",c()([{class:l([r,d]),style:f},Object(o.b)(i,!0)]),[t("span",{class:l("spinner",r)},[h,v])])}d.props={size:String,type:{type:String,default:"circular"},color:{type:String,default:u}},e.a=r(d)}});
//# sourceMappingURL=5.f50e8f0399b85e1b780b.js.map