webpackJsonp([6],{CzHV:function(e,t){},ZnA9:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("M67l"),i={components:{backHeader:a("zH8l").a},data:function(){return{arrFiles:[],game:"",type:"",page:0}},mounted:function(){var e=this;this.bus.$on("mypublish",function(t,a){e.game=t,e.type=a})},methods:{deletePic:function(e){this.arrFiles.splice(e,1)},uploadFile:function(e){this.$refs.preview,this.$refs.uploadBtn;var t=e.target.files[0],a=this;if(t){i=t.name,r=t.size;var i,r,n=new FileReader;0==t.type.indexOf("image")?n.readAsDataURL(t):Object(s.a)("请选择图片格式");var l=this.arrFiles,d=document.createElement("canvas"),c=d.getContext("2d");n.onload=function(e){var s=new Image;if(s.onload=function(){a.arrFiles.length},r<307200)l.push({file:t,name:i,img:e.target.result});else{var n=new Image;n.onload=function(){var e=n.width,a=n.width,r=n.height,o=n.height,v="image/png"==t.type?"image/jpeg":t.type;(e>1120||r>680)&&(e/1120>r/680?o=r*(a=1120)/e:a=e*(o=680)/r),d.width=a,d.height=o,c.clearRect(0,0,a,o),c.drawImage(n,0,0,a,o);for(var p=d.toDataURL(v,.8),f=atob(p.split(",")[1]),u=f.length,m=new Uint8Array(u),_=0;_<u;_++)m[_]=f.charCodeAt(_);var h=new Blob([m.buffer],{type:v});i=i.indexOf("png")>-1?i.split(".")[0]+".jpg":i,l.push({file:h,name:i,img:p});l.length;s.src=p},n.src=e.target.result}}}},baseValidate:function(){if(""==this.$refs.game_id.value)Object(s.a)("没有选择具体的游戏");else if(""==this.$refs.account.value.trim())Object(s.a)("游戏账号不能为空");else if(""==this.$refs.grade.value.trim())Object(s.a)("还没有选择游戏等级");else if(""==this.$refs.password.value.trim())Object(s.a)("请填写游戏密码");else if(""==this.$refs.role_name.value.trim()||""==this.$refs.game_title.value.trim())Object(s.a)("请填写角色名与标题");else if(""==this.$refs.describe.value.trim())Object(s.a)("没有填写账号描述");else if(this.arrFiles.length<1)Object(s.a)("至少上传一张图片");else if(this.arrFiles.length>5)Object(s.a)("图片不能超过5张哦");else{for(var e=document.querySelector("#publish"),t=new FormData(e),a=0;a<this.arrFiles.length;a++){var i=this.arrFiles[a];t.append("img[]",i.file,i.name)}console.dir(t);var r=new XMLHttpRequest;r.open("POST","test"),r.send(t),Object(s.a)("在控制面板看test xhr的信息")}}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("back-header",{attrs:{theme:"发布账号"}}),e._v(" "),e._m(0),e._v(" "),a("div",{staticClass:"wrapper"},[a("form",{ref:"publish",attrs:{id:"publish"}},[a("div",{ref:"formBox",staticClass:"formBox",attrs:{id:"formBox1"}},[a("dl",{staticClass:"chooseTab"},[a("dt",[e._v("游戏名称")]),e._v(" "),a("dd",[a("router-link",{attrs:{tag:"li",id:"gameChoose",to:"/Search?will=Publish",replace:""}},[e._v(e._s(e.game?e.game:"选择游戏"))]),e._v(" "),a("input",{ref:"game_id",attrs:{type:"hidden",name:"game_id",id:"game_id"},domProps:{value:e.type}}),e._v(" "),a("input",{ref:"game_name",attrs:{type:"hidden",name:"game_name",id:"game_name"},domProps:{value:e.game}}),e._v(" "),a("span",{staticClass:"arrowRight"})],1)]),e._v(" "),a("dl",[a("dt",[e._v("游戏账号")]),e._v(" "),a("dd",[a("input",{ref:"account",attrs:{type:"text",name:"account"}})])]),e._v(" "),a("dl",[a("dt",[e._v("游戏等级")]),e._v(" "),a("dd",[a("input",{ref:"grade",attrs:{type:"text",name:"grade"}})])]),e._v(" "),a("dl",[a("dt",[e._v("游戏密码")]),e._v(" "),a("dd",[a("input",{ref:"password",attrs:{type:"password",name:"password"}})])]),e._v(" "),a("dl",[a("dt",[e._v("角色名")]),e._v(" "),a("dd",[a("input",{ref:"role_name",attrs:{type:"text",name:"role_name"}})])]),e._v(" "),a("dl",[a("dt",[e._v("商品标题")]),e._v(" "),a("dd",[a("input",{ref:"game_title",attrs:{type:"text",name:"good_name",placeholder:"不能带一切联系方式"}})])]),e._v(" "),a("dl",{staticClass:"des"},[a("dt",[e._v("请输入账号描述")]),e._v(" "),a("dd",[a("textarea",{ref:"describe",attrs:{name:"describe",placeholder:"对账号的简介，如装备、英雄、皮肤、时装等...",id:"describe"}})])]),e._v(" "),a("dl",{staticClass:"picArea"},[a("dt",[e._v("上传账号截图(1~5张)")]),e._v(" "),a("dd",{ref:"preview",staticClass:"preview clearfix"},[e._l(e.arrFiles,function(t,s){return a("div",{staticClass:"picWrap"},[a("img",{ref:"img"+s,refInFor:!0,attrs:{src:t.img}}),e._v(" "),a("span",{ref:"delete",refInFor:!0,staticClass:"deletePic",on:{click:function(t){return e.deletePic(s)}}})])}),e._v(" "),a("label",{ref:"uploadBtn"},[a("input",{staticClass:"input-file",attrs:{type:"file",id:"to_upload"},on:{change:e.uploadFile}})])],2)]),e._v(" "),a("dl",{staticClass:"btn-area"},[a("button",{staticClass:"nextStepBtn nextBtn1",attrs:{type:"button",id:"baseInfoBtn"},on:{click:e.baseValidate}},[e._v("提交")])])])])]),e._v(" "),a("div",{staticClass:"mask"}),e._v(" "),a("div",{staticClass:"selectBox",attrs:{id:"selectBox1"}}),e._v(" "),a("div",{staticClass:"selectBox",attrs:{id:"selectBox2"}})],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("ul",{staticClass:"tips"},[this._v("请勿发布虚假账号,广告,您填写的信息"),t("br"),this._v("是需要通过审核才发布的")])}]};var n=a("C7Lr")(i,r,!1,function(e){a("CzHV")},"data-v-a58c1002",null);t.default=n.exports}});
//# sourceMappingURL=6.a51dfd4eb814778b65b1.js.map