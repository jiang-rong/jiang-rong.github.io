webpackJsonp([7],{ZnA9:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("M67l"),s={components:{backHeader:a("zH8l").a},data:function(){return{arrFiles:[],game:"",type:"",page:0}},mounted:function(){var e=this;this.bus.$on("mypublish",function(t,a){e.game=t,e.type=a})},methods:{deletePic:function(e){this.arrFiles.splice(e,1)},uploadFile:function(e){this.$refs.preview,this.$refs.uploadBtn;var t=e.target.files[0],a=this;if(t){s=t.name,i=t.size;var s,i,n=new FileReader;0==t.type.indexOf("image")?n.readAsDataURL(t):Object(r.a)("请选择图片格式");var d=this.arrFiles,l=document.createElement("canvas"),o=l.getContext("2d");n.onload=function(e){var r=new Image;if(r.onload=function(){a.arrFiles.length},i<307200)d.push({file:t,name:s,img:e.target.result});else{var n=new Image;n.onload=function(){var e=n.width,a=n.width,i=n.height,c=n.height,p=t.type;(e>1120||i>680)&&(e/1120>i/680?c=i*(a=1120)/e:a=e*(c=680)/i),l.width=a,l.height=c,o.clearRect(0,0,a,c),o.drawImage(n,0,0,a,c);for(var v=l.toDataURL(p,.8),u=atob(v.split(",")[1]),m=u.length,f=new Uint8Array(m),_=0;_<m;_++)f[_]=u.charCodeAt(_);var h=new Blob([f.buffer],{type:p});d.push({file:h,name:s,img:v}),r.src=v},n.src=e.target.result}}}},baseValidate:function(){for(var e=document.querySelector("#publish"),t=new FormData(e),a=0;a<this.arrFiles.length;a++){var s=this.arrFiles[a];t.append("img[]",s.file,s.name)}var i=new XMLHttpRequest;i.open("POST","/api/rent.php"),i.send(t),Object(r.a)("在控制面板看test xhr的信息")}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("back-header",{attrs:{theme:"发布账号"}}),e._v(" "),e._m(0),e._v(" "),a("div",{staticClass:"wrapper"},[a("form",{ref:"publish",attrs:{id:"publish"}},[a("div",{ref:"formBox",staticClass:"formBox",attrs:{id:"formBox1"}},[a("dl",{staticClass:"chooseTab"},[a("dt",[e._v("游戏名称")]),e._v(" "),a("dd",[a("router-link",{attrs:{tag:"li",id:"gameChoose",to:"/Search?will=Publish",replace:""}},[e._v(e._s(e.game?e.game:"选择游戏"))]),e._v(" "),a("input",{ref:"game_id",attrs:{type:"hidden",name:"game_id",id:"game_id"},domProps:{value:e.type}}),e._v(" "),a("input",{ref:"game_name",attrs:{type:"hidden",name:"game_name",id:"game_name"},domProps:{value:e.game}}),e._v(" "),a("span",{staticClass:"arrowRight"})],1)]),e._v(" "),a("dl",[a("dt",[e._v("游戏账号")]),e._v(" "),a("dd",[a("input",{ref:"account",attrs:{type:"text",name:"account"}})])]),e._v(" "),a("dl",[a("dt",[e._v("游戏等级")]),e._v(" "),a("dd",[a("input",{ref:"grade",attrs:{type:"text",name:"grade"}})])]),e._v(" "),a("dl",[a("dt",[e._v("游戏密码")]),e._v(" "),a("dd",[a("input",{ref:"password",attrs:{type:"password",name:"password"}})])]),e._v(" "),a("dl",[a("dt",[e._v("角色名")]),e._v(" "),a("dd",[a("input",{ref:"role_name",attrs:{type:"text",name:"role_name"}})])]),e._v(" "),a("dl",[a("dt",[e._v("商品标题")]),e._v(" "),a("dd",[a("input",{ref:"game_title",attrs:{type:"text",name:"good_name",placeholder:"不能带一切联系方式"}})])]),e._v(" "),a("dl",{staticClass:"des"},[a("dt",[e._v("请输入账号描述")]),e._v(" "),a("dd",[a("textarea",{ref:"describe",attrs:{name:"describe",placeholder:"对账号的简介，如装备、英雄、皮肤、时装等...",id:"describe"}})])]),e._v(" "),a("dl",{staticClass:"picArea"},[a("dt",[e._v("上传账号截图(1~5张)")]),e._v(" "),a("dd",{ref:"preview",staticClass:"preview clearfix"},[e._l(e.arrFiles,function(t,r){return a("div",{staticClass:"picWrap"},[a("img",{ref:"img"+r,refInFor:!0,attrs:{src:t.img}}),e._v(" "),a("span",{ref:"delete",refInFor:!0,staticClass:"deletePic",on:{click:function(t){return e.deletePic(r)}}})])}),e._v(" "),a("label",{ref:"uploadBtn"},[a("input",{staticClass:"input-file",attrs:{type:"file",id:"to_upload"},on:{change:e.uploadFile}})])],2)]),e._v(" "),a("dl",{staticClass:"btn-area"},[a("button",{staticClass:"nextStepBtn nextBtn1",attrs:{type:"button",id:"baseInfoBtn"},on:{click:e.baseValidate}},[e._v("提交")])])])])]),e._v(" "),a("div",{staticClass:"mask"}),e._v(" "),a("div",{staticClass:"selectBox",attrs:{id:"selectBox1"}}),e._v(" "),a("div",{staticClass:"selectBox",attrs:{id:"selectBox2"}})],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("ul",{staticClass:"tips"},[this._v("请勿发布虚假账号,广告,您填写的信息"),t("br"),this._v("是需要通过审核才发布的")])}]};var n=a("C7Lr")(s,i,!1,function(e){a("zCb4")},"data-v-9838bf8a",null);t.default=n.exports},zCb4:function(e,t){}});
//# sourceMappingURL=7.bd0f7d62ef3bc7dc17d7.js.map